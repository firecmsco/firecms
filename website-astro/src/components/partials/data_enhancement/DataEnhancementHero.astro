---
import Panel from "../../Panel.astro";
import TwoColumns from "../general/TwoColumns.astro";
import {
    CTAOutlinedButtonMixin,
    CTACaret,
    defaultBorderMixin
} from "../../../migration/partials/styles";
---

<Panel color={"white"} className={"border-none"}>
    <TwoColumns>
        <div slot="left">
            <h2 class="text-4xl tracking-tight font-extrabold md:text-6xl">
                <span class="block">AI</span>
                <span class="block text-primary">Integration</span>
            </h2>
            <div class="mt-3 text-xl sm:mt-4 md:text-2xl">
                <p>
                    Discover the power of FireCMS with ChatGPT integration,
                    now available for you to try out for <b>FREE</b>! Experience a
                    game-changing autofill feature that not only saves you
                    time but also increases the accuracy of your data entry.
                </p>
                <p>
                    Sign up now and experience the power of the latest GPT
                    models to enhance your data entry and streamline your
                    business processes.
                </p>
            </div>

            <div class="mt-5 sm:mt-8">
                <a href="https://demo.firecms.co/c/books"
                   rel="noopener noreferrer"
                   class:list={[CTAOutlinedButtonMixin]}
                   target="_blank">
                    Check this demo online
                    <Fragment set:html={CTACaret} />
                </a>
            </div>
        </div>
        <div slot="right">
            <div
                style={{
                    flexDirection: "column",
                    aspectRatio: "550 / 692",
                    maxHeight: "692px",
                    maxWidth: "550px"
                }}
                data-aos="fade-up"
                class="flex content-center justify-center">
                <video
                    class:list={["pointer-events-none rounded-2xl border border-solid", defaultBorderMixin]}
                    width="100%"
                    loop
                    autoplay
                    muted>
                    <source
                        id="data-enhancement-hero-video-source"
                        src="/img/data/books_light.mp4"
                        type="video/mp4"/>
                </video>
            </div>
        </div>
    </TwoColumns>
</Panel>

<script>
    document.addEventListener('astro:page-load', () => {
        const videoSource = document.getElementById('data-enhancement-hero-video-source');
        const video = videoSource.parentElement;
        const observer = new MutationObserver(() => {
            const isDark = document.documentElement.classList.contains('dark');
            const newSrc = isDark ? '/img/data/books_dark.mp4' : '/img/data/books_light.mp4';
            if (videoSource.src !== newSrc) {
                videoSource.src = newSrc;
                video.load();
            }
        });
        observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
        // Initial check
        const isDark = document.documentElement.classList.contains('dark');
        const newSrc = isDark ? '/img/data/books_dark.mp4' : '/img/data/books_light.mp4';
        if (videoSource.src !== newSrc) {
            videoSource.src = newSrc;
            video.load();
        }
    });
</script>