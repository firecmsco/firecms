---
import Panel from "../../Panel.astro";
import TwoColumns from "../general/TwoColumns.astro";
import { defaultBorderMixin } from "../../../migration/partials/styles";
---

<Panel color={"lighter"}>
    <TwoColumns>
        <div slot="left">
            <div
                style={{
                    aspectRatio: "550 / 692",
                    maxHeight: "692px",
                    maxWidth: "550px"
                }}
                data-aos="fade-up"
                class="flex content-center justify-center items-center">
                <video
                    class:list={["pointer-events-none rounded-2xl border border-solid", defaultBorderMixin]}
                    width="100%"
                    loop
                    autoplay
                    muted>
                    <source
                        id="autofill-video-source"
                        src="/img/data/product_demo_light.mp4"
                        type="video/mp4"/>
                </video>
            </div>
        </div>
        <div slot="right">
            <h2 class="">
                Fill in Details for Nike Air Max
            </h2>
            <p class="text-xl">
                Define a prompt to guide the autofill feature according to
                your needs. Consider scenarios such as adding a <b>new
                product</b> to your ecommerce store catalog.
            </p>
            <p class="text-xl">
                ...or drafting a <b>compelling article</b>
            </p>
            <p class="text-xl">
                ...or designing the curriculum of a <b>course</b>
            </p>
            <p class="text-xl">
                ...or <b>any creative endeavor</b> you can imagine
            </p>

            <p class="text-base">
                The ChatGPT plugin for FireCMS leverages OpenAI's
                state-of-the-art GPT model to generate content that meets
                your requirements. Feel free to edit the generated content
                and save it to your database as needed.
            </p>
        </div>
    </TwoColumns>
</Panel>

<script>
    document.addEventListener('astro:page-load', () => {
        const videoSource = document.getElementById('autofill-video-source');
        const video = videoSource.parentElement;
        const observer = new MutationObserver(() => {
            const isDark = document.documentElement.classList.contains('dark');
            const newSrc = isDark ? '/img/data/product_demo_dark.mp4' : '/img/data/product_demo_light.mp4';
            if (videoSource.src !== newSrc) {
                videoSource.src = newSrc;
                video.load();
            }
        });
        observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
        // Initial check
        const isDark = document.documentElement.classList.contains('dark');
        const newSrc = isDark ? '/img/data/product_demo_dark.mp4' : '/img/data/product_demo_light.mp4';
        if (videoSource.src !== newSrc) {
            videoSource.src = newSrc;
            video.load();
        }
    });
</script>