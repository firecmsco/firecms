---
export interface Props {
    title?: string;
    description?: string;
}

import { ViewTransitions } from "astro:transitions";
import "../styles/global.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import CookieBanner from "../components/CookieBanner.astro";

const {
    title = "FireCMS - The Headless CMS for Firebase and MongoDB",
    description = "Build powerful back-office applications in minutes with FireCMS. A headless CMS framework for Firebase and MongoDB with AI-powered features, visual schema builder, and beautiful data management interface."
} = Astro.props;

const canonicalBase = "https://firecms.co";
const path = Astro.url.pathname;
const canonical = path === "/" ? canonicalBase : `${canonicalBase}${path}`;
---

<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>{title}</title>
    <link rel="shortcut icon" href="/favicon.svg" type="image/x-icon">
    <link rel="canonical" href={canonical}>
    <meta name="description" content={description}>
    <meta name="keywords"
          content="headless CMS, Firebase CMS, Firestore CMS, React admin panel, no-code backend, AI-powered CMS, visual schema builder, data management, back-office application, content management system, Firestore admin, Firestore admin, Firebase back office, database UI">
    <meta name="robots" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="sitemap" href="/sitemap-index.xml"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content={title}>
    <meta property="og:description" content={description}>
    <meta property="og:type" content="website">
    <meta property="og:url" content={canonical}>
    <meta property="og:image" content="https://firecms.co/img/teaser.png">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@firecmsco">
    <meta name="twitter:title" content={title}>
    <meta name="twitter:description" content={description}>
    <meta name="twitter:image:type" content="image/png">
    <meta name="twitter:image:width" content="1200">
    <meta name="twitter:image:height" content="630">
    <meta name="twitter:image" content="https://firecms.co/img/twitter_teaser.png">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@graph": [
                {
                    "@type": "WebSite",
                    "name": "FireCMS",
                    "url": "https://firecms.co",
                    "description": "Build powerful back-office applications in minutes with FireCMS. A headless CMS framework for Firebase and MongoDB.",
                    "publisher": {
                        "@id": "https://firecms.co/#organization"
                    }
                },
                {
                    "@type": "Organization",
                    "@id": "https://firecms.co/#organization",
                    "name": "FireCMS",
                    "url": "https://firecms.co",
                    "logo": {
                        "@type": "ImageObject",
                        "url": "https://firecms.co/img/logo_small.png",
                        "width": 512,
                        "height": 512
                    },
                    "sameAs": [
                        "https://x.com/firecmsco",
                        "https://github.com/firecmsco/firecms",
                        "https://www.linkedin.com/company/firecms"
                    ]
                },
                {
                    "@type": "SoftwareApplication",
                    "name": "FireCMS",
                    "applicationCategory": "DeveloperApplication",
                    "operatingSystem": "Web",
                    "description": "Build powerful back-office applications in minutes with FireCMS. A headless CMS framework for Firebase and MongoDB with AI-powered features, visual schema builder, and beautiful data management interface.",
                    "url": "https://firecms.co",
                    "screenshot": "https://firecms.co/img/teaser.png",
                    "offers": {
                        "@type": "Offer",
                        "price": "0",
                        "priceCurrency": "USD",
                        "availability": "https://schema.org/InStock"
                    },
                    "aggregateRating": {
                        "@type": "AggregateRating",
                        "ratingValue": "5",
                        "ratingCount": "100",
                        "bestRating": "5",
                        "worstRating": "1"
                    },
                    "softwareVersion": "3.0",
                    "applicationSubCategory": "Content Management System",
                    "keywords": "headless CMS, Firebase CMS, MongoDB CMS, React admin panel, no-code backend, AI-powered CMS",
                    "publisher": {
                        "@id": "https://firecms.co/#organization"
                    }
                }
            ]
        }
    </script>

    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
<!-- Google tag (gtag.js) - Load the library -->
    <script async is:inline src="https://www.googletagmanager.com/gtag/js?id=G-NL75PPNYXD"/>

    <script is:inline>

        // Initialize dataLayer and gtag function
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        // Set default consents - only once
        window.gtag("consent", "default", {
            ad_storage: "denied",
            ad_user_data: "denied",
            ad_personalization: "denied",
            analytics_storage: "denied",
        });


        // Check if user has already consented
        const cookieConsent = localStorage.getItem("cookie-consent");
        if (cookieConsent === "accepted") {
            window.gtag("consent", "update", {
                ad_storage: "granted",
                ad_user_data: "granted",
                ad_personalization: "granted",
                analytics_storage: "granted",
            });
        }

        // Set timestamp - only once
        window.gtag("js", new Date());

        // Initialize GA4 and let Enhanced Measurement handle pageviews automatically
        window.gtag("config", "G-NL75PPNYXD");

    </script>

    <!-- View Transitions -->
    <ViewTransitions/>
    <slot name="head"/>
</head>

<body class="font-sans bg-black text-surface-300 antialiased" style="color-scheme: dark;">
<Header/>
<slot/>
<Footer/>
<CookieBanner/>
<script src="../scripts/tracking-params.js"/>
<script src="../scripts/enhance-app-links.js"/>
<script src="../page-effects.ts"/>
</body>

<style>
    /* Fallback scrollbar hiding */
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    video, iframe, img.feature-img {
        max-width: 100%;
        height: auto;
    }

    .btn-glow:hover {
        box-shadow: 0 0 15px 3px rgba(0, 112, 244, 0.5);
    }

    iframe {
        aspect-ratio: 16 / 9;
    }

    .gradient-text {
        background: linear-gradient(135deg, #0070f4, #359aff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .hero-gradient {
        background: radial-gradient(ellipse at center, rgba(0, 112, 244, 0.1) 0%, transparent 70%);
    }

    :focus-visible {
        outline: none;
        box-shadow: 0 0 0 2px transparent, 0 0 0 4px rgba(0, 112, 244, 0.75), 0 0 0 6px transparent;
    }
</style>
</html>
